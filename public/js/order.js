$(document).ready(function(){var E=0;for(var F=0;F<$(".shop-list").length;F++){E+=parseFloat($(".shop-list").eq(F).children("td").eq(2).children(".shop_price").html())}$(".subtotal").html(E);$(".money-box").children("ul").children("li").eq(1).children("span").html(E);var A=parseFloat(E)+0;$("#allprice").html(A);if($("input[name='type']").val()!="integral"){$(".f4_b").html(Math.round(E));$("input[name='get_point']").val(Math.round(E))}$("#ECS_BONUS").val("");$("input[name='order_price']").val(A);$(".money-box").children("ul").children("li").eq(3).children("span").html("0.00");$("input[name='pack_price']").val("0.00");for(var D=0;D<$("input[name='userAddress']").length;D++){if($("input[name='userAddress']").eq(D).prop("checked")==true){var G=$("input[name='userAddress']").eq(D);var B=G.parents("div").children(".addr-name").html();var H=G.parents("div").children(".addr-tel").html();var C=G.parents("div").children(".addr-info").html();var C=C.split(" ");$("input[name='address_name']").val(B);$("input[name='address_tel']").val(H);$("input[name='province']").val(C[0]);$("input[name='city']").val(C[1]);$("input[name='district']").val(C[2]);$("input[name='address']").val(C[3])}}});$(document).on("click","#shipping-list li",function(){var B=$(this);var E=B.children("input[name='logistics_price']").val();var A=$(".money-box").children("ul").children("li").eq(1).children("span").html();var C=$(".money-box").children("ul").children("li").eq(3).children("span").html();var D=parseFloat(A)-parseFloat(C)+parseFloat(E);$(".money-box").children("ul").children("li").eq(2).children("span").html(E);$("#allprice").html(D);$("input[name='pack_price']").val(C);$("input[name='order_price']").val(D)});$(document).on("change","#ECS_BONUS",function(){var D=$(this).val();var G=$(this).children("option:selected").html();var B=$(this).children("option:selected").attr("low_use_price");var C=$(".money-box").children("ul").children("li").eq(3).children("span").html();if(D==""){$(".money-box").children("ul").children("li").eq(3).css("display","none");$(".money-box").children("ul").children("li").eq(3).children("span").html("0.00")}else{$(".money-box").children("ul").children("li").eq(3).css("display","block");$(".money-box").children("ul").children("li").eq(3).children("span").html(G)}if(G=="请选择"){G="0.00"}if(B==""){B="0.00"}$("#pack_price").html(G);$("#low_use_price").html(B);var F=$(".money-box").children("ul").children("li").eq(2).children("span").html();var E=$(".money-box").children("ul").children("li").eq(1).children("span").html();var A=parseFloat(F)-parseFloat(G)+parseFloat(E)>0?parseFloat(F)-parseFloat(G)+parseFloat(E):0;$("#allprice").html(A);$("input[name='pack_price']").val(G);$("input[name='order_price']").val(A)});$(document).on("click","input[name='userAddress']",function(){var B=$(this).parents("div").children(".addr-name").html();var C=$(this).parents("div").children(".addr-tel").html();var A=$(this).parents("div").children(".addr-info").html();var A=A.split(" ");$("input[name='address_name']").val(B);$("input[name='address_tel']").val(C);$("input[name='province']").val(A[0]);$("input[name='city']").val(A[1]);$("input[name='district']").val(A[2]);$("input[name='address']").val(A[3])});$(document).on("click",".logistics-price",function(){$(this).next('input[name="logistics_price"]').attr("checked",true);$("input[name='logistics_type']").val($(this).html())});$(document).on("click",".pay-type",function(){$(this).next('input[name="pay_type"]').attr("checked",true)});$(document).on("click","#submit",function(){var B=$("#low_use_price").html();var A=$("#allprice").html();var C=$("input[name='pack_price']").val();if(parseFloat(A)+parseFloat(C)<parseFloat(B)){alert("该订单不能使用该红包！");return false}$("#theForm").submit()});
