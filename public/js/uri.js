var Query=function(G){var E=function(O){var M=[],N,K,L,P;if(typeof O=="undefined"||O===null||O===""){return M}O.indexOf("?")===0&&(O=O.substring(1)),K=O.toString().split(/[&;]/);for(N=0;N<K.length;N++){L=K[N],P=L.split("="),M.push([P[0],P[1]])}return M},F=E(G),J=function(){var M="",L,K;for(L=0;L<F.length;L++){K=F[L],M.length>0&&(M+="&"),M+=K.join("=")}return M.length>0?"?"+M:M},A=function(K){K=decodeURIComponent(K),K=K.replace("+"," ");return K},H=function(M){var L,K;for(K=0;K<F.length;K++){L=F[K];if(A(M)===A(L[0])){return L[1]}}},I=function(M){var L=[],K,N;for(K=0;K<F.length;K++){N=F[K],A(M)===A(N[0])&&L.push(N[1])}return L},C=function(P,O){var L=[],Q,K,M,N;for(Q=0;Q<F.length;Q++){K=F[Q],M=A(K[0])===A(P),N=A(K[1])===A(O),(arguments.length===1&&!M||arguments.length===2&&!M&&!N)&&L.push(K)}F=L;return this},D=function(M,L,K){arguments.length===3&&K!==-1?(K=Math.min(K,F.length),F.splice(K,0,[M,L])):arguments.length>0&&F.push([M,L]);return this},B=function(O,N,L){var P=-1,K,M;if(arguments.length===3){for(K=0;K<F.length;K++){M=F[K];if(A(M[0])===A(O)&&decodeURIComponent(M[1])===A(L)){P=K;break}}C(O,L).addParam(O,N,P)}else{for(K=0;K<F.length;K++){M=F[K];if(A(M[0])===A(O)){P=K;break}}C(O),D(O,N,P)}return this};return{getParamValue:H,getParamValues:I,deleteParam:C,addParam:D,replaceParam:B,toString:J}},Uri=function(V){var T=!1,U=function(j){var i={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},B=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],C={name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},k=i[T?"strict":"loose"].exec(j),A={},b=14;while(b--){A[B[b]]=k[b]||""}A[C.name]={},A[B[12]].replace(C.parser,function(f,d,e){d&&(A[C.name][d]=e)});return A},Y=U(V||""),Z=new Query(Y.query),W=function(A){typeof A!="undefined"&&(Y.protocol=A);return Y.protocol},X=null,N=function(A){typeof A!="undefined"&&(X=A);return X===null?Y.source.indexOf("//")!==-1:X},O=function(A){typeof A!="undefined"&&(Y.userInfo=A);return Y.userInfo},L=function(A){typeof A!="undefined"&&(Y.host=A);return Y.host},M=function(A){typeof A!="undefined"&&(Y.port=A);return Y.port},R=function(A){typeof A!="undefined"&&(Y.path=A);return Y.path},S=function(A){typeof A!="undefined"&&(Z=new Query(A));return Z},P=function(A){typeof A!="undefined"&&(Y.anchor=A);return Y.anchor},Q=function(A){W(A);return this},F=function(A){N(A);return this},G=function(A){O(A);return this},D=function(A){L(A);return this},E=function(A){M(A);return this},J=function(A){R(A);return this},K=function(A){S(A);return this},H=function(A){P(A);return this},I=function(A){return S().getParamValue(A)},Ae=function(A){return S().getParamValues(A)},Af=function(B,A){arguments.length===2?S().deleteParam(B,A):S().deleteParam(B);return this},Ad=function(C,A,B){arguments.length===3?S().addParam(C,A,B):S().addParam(C,A);return this},Ac=function(C,A,B){arguments.length===3?S().replaceParam(C,A,B):S().replaceParam(C,A);return this},Aa=function(){var B="",A=function(C){return C!==null&&C!==""};A(W())?(B+=W(),W().indexOf(":")!==W().length-1&&(B+=":"),B+="//"):N()&&A(L())&&(B+="//"),A(O())&&A(L())&&(B+=O(),O().indexOf("@")!==O().length-1&&(B+="@")),A(L())&&(B+=L(),A(M())&&(B+=":"+M())),A(R())?B+=R():A(L())&&(A(S().toString())||A(P()))&&(B+="/"),A(S().toString())&&(S().toString().indexOf("?")!==0&&(B+="?"),B+=S().toString()),A(P())&&(P().indexOf("#")!==0&&(B+="#"),B+=P());return B},Ab=function(){return new Uri(Aa())};return{protocol:W,hasAuthorityPrefix:N,userInfo:O,host:L,port:M,path:R,query:S,anchor:P,setProtocol:Q,setHasAuthorityPrefix:F,setUserInfo:G,setHost:D,setPort:E,setPath:J,setQuery:K,setAnchor:H,getQueryParamValue:I,getQueryParamValues:Ae,deleteQueryParam:Af,addQueryParam:Ad,replaceQueryParam:Ac,toString:Aa,clone:Ab}},jsUri=Uri;