var Compare=new Object();Compare={add:function(C,D,A){var B=0;for(var E in this.data){if(typeof(this.data[E])=="function"){continue}if(this.data[E].t!=A){alert(goods_type_different.replace("%s",D));return}B++}if(this.data[C]){alert(exist.replace("%s",D));return}else{this.data[C]={n:D,t:A}}this.save();this.init()},relocation:function(){if(this.compareBox.style.display!=""){return}var B=Math.max(document.documentElement.scrollTop,document.body.scrollTop);var A=0.2*(B-this.lastScrollY);if(A>0){A=Math.ceil(A)}else{A=Math.floor(A)}this.compareBox.style.top=parseInt(this.compareBox.style.top)+A+"px";this.lastScrollY=this.lastScrollY+A},init:function(){this.data=new Object();var B=document.getCookie("compareItems");if(B!=null){this.data=$.evalJSON(B)}if(!this.compareBox){this.compareBox=document.createElement("DIV");var F=document.createElement("INPUT");this.compareList=document.createElement("UL");this.compareBox.id="compareBox";this.compareBox.style.display="none";this.compareBox.style.top="200px";this.compareBox.align="center";this.compareList.id="compareList";F.type="button";F.value="开始对比";this.compareBox.appendChild(this.compareList);this.compareBox.appendChild(F);F.onclick=function(){var H=document.getCookie("compareItems");var I=$.evalJSON(H);var K=document.location.href;K=K.substring(0,K.lastIndexOf("/")+1)+"compare.php";var J=0;for(var L in I){if(typeof(I[L])=="function"){continue}if(J==0){K+="?goods[]="+L}else{K+="&goods[]="+L}J++}if(J<2){alert(compare_no_goods);return}document.location.href=K};document.body.appendChild(this.compareBox)}this.compareList.innerHTML="";var C=this;for(var A in this.data){if(typeof(this.data[A])=="function"){continue}var E=document.createElement("LI");var G=document.createElement("SPAN");G.style.overflow="hidden";G.style.width="100px";G.style.height="20px";G.style.display="block";G.innerHTML=this.data[A].n;E.appendChild(G);E.style.listStyle="none";var D=document.createElement("IMG");D.src="themes/default/images/drop.gif";D.className=A;D.onclick=function(){document.getElementById("compareList").removeChild(this.parentNode);delete C.data[this.className];C.save();C.init()};E.insertBefore(D,E.childNodes[0]);this.compareList.appendChild(E)}if(this.compareList.childNodes.length>0){this.compareBox.style.display="";this.timer=window.setInterval(this.relocation.bind(this),50)}else{this.compareBox.style.display="none";window.clearInterval(this.timer);this.timer=0}},save:function(){var A=new Date();A.setTime(A.getTime()+99999999);document.setCookie("compareItems",$.toJSON(this.data))},lastScrollY:0};