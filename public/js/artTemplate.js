/*
 * artTemplate - Template Engine
 * https://github.com/aui/artTemplate
 * Released under the MIT, BSD, and GPL Licenses
 */
!(function(){var X=function(Y,Z){return typeof Z==="string"?S(Z,{filename:Y}):E(Y,Z)};X.version="3.0.0";X.config=function(Y,Z){D[Y]=Z};var D=X.defaults={openTag:"<%",closeTag:"%>",escape:true,cache:true,compress:false,parser:null};var V=X.cache={};X.render=function(Y,Z){Z=Z?Z:{};return E(Y,Z)};var E=X.renderFile=function(Z,a){var Y=X.get(Z)||H({filename:Z,name:"Render Error",message:"Template not found"});return a?Y(a):Y};X.get=function(b){var Y;if(V[b]){Y=V[b]}else{if(typeof document==="object"){var a=document.getElementById(b);if(a){var Z=(a.value||a.innerHTML).replace(/^\s*|\s*$/g,"");Y=S(Z,{filename:b})}}}return Y};var J=function(Z,Y){if(typeof Z!=="string"){Y=typeof Z;if(Y==="number"){Z+=""}else{if(Y==="function"){Z=J(Z.call(Z))}else{Z=""}}}return Z};var C={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"};var L=function(Y){return C[Y]};var U=function(Y){return J(Y).replace(/&(?![\w#]+;)|[<>"']/g,L)};var P=Array.isArray||function(Y){return({}).toString.call(Y)==="[object Array]"};var I=function(b,Y){var Z,a;if(P(b)){for(Z=0,a=b.length;Z<a;Z++){Y.call(b,b[Z],Z,b)}}else{for(Z in b){Y.call(b,b[Z],Z)}}};var T=X.utils={$helpers:{},$include:E,$string:J,$escape:U,$each:I};X.helper=function(Y,Z){F[Y]=Z};var F=X.helpers=T.$helpers;X.onerror=function(Y){var a="Template Error\n\n";for(var Z in Y){a+="<"+Z+">\n"+Y[Z]+"\n\n"}if(typeof console==="object"){console.error(a)}};var H=function(Y){X.onerror(Y);return function(){return"{Template Error}"}};var S=X.compile=function(Z,b){b=b||{};for(var c in D){if(b[c]===undefined){b[c]=D[c]}}var f=b.filename;try{var d=O(Z,b)}catch(Y){Y.filename=f||"anonymous";Y.name="Syntax Error";return H(Y)}function a(h){try{return new d(h,f)+""}catch(g){if(!b.debug){b.debug=true;return S(Z,b)(h)}return H(g)()}}a.prototype=d.prototype;a.toString=function(){return d.toString()};if(f&&b.cache){V[f]=a}return a};var K=T.$each;var Q="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined";var B=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g;var M=/[^\w$]+/g;var W=new RegExp(["\\b"+Q.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g");var N=/^\d[^,]*|,\d[^,]*/g;var R=/^,+|,+$/g;function G(Y){return Y.replace(B,"").replace(M,",").replace(W,"").replace(N,"").replace(R,"").split(/^$|,+/)}function A(Y){return"'"+Y.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function O(n,r){var p=r.debug;var u=r.openTag;var Z=r.closeTag;var b=r.parser;var k=r.compress;var f=r.escape;var d=1;var v={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1};var c="".trim;var q=c?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"];var l=c?"$out+=text;return $out;":"$out.push(text);";var i="function(){var text=''.concat.apply('',arguments);"+l+"}";var Y="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+l+"}";var t="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(p?"$line=0,":"");var h=q[0];var a="return new String("+q[3]+");";K(n.split(u),function(w){w=w.split(Z);var x=w[0];var e=w[1];if(w.length===1){h+=m(x)}else{h+=g(x);if(e){h+=m(e)}}});var j=t+h+a;if(p){j="try{"+j+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+A(n)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}"}try{var o=new Function("$data","$filename",j);o.prototype=T;return o}catch(s){s.temp="function anonymous($data,$filename) {"+j+"}";throw s}function m(e){d+=e.split(/\n/).length-1;if(k){e=e.replace(/\s+/g," ").replace(/<!--.*?-->/g,"")}if(e){e=q[1]+A(e)+q[2]+"\n"}return e}function g(w){var e=d;if(b){w=b(w,r)}else{if(p){w=w.replace(/\n/g,function(){d++;return"$line="+d+";"})}}if(w.indexOf("=")===0){var y=f&&!/^=[=#]/.test(w);w=w.replace(/^=[=#]?|[\s;]*$/g,"");if(y){var x=w.replace(/\s*\([^\)]+\)/,"");if(!T[x]&&!/^(include|print)$/.test(x)){w="$escape("+w+")"}}else{w="$string("+w+")"}w=q[1]+w+q[2]}if(p){w="$line="+e+";"+w}K(G(w),function(z){if(!z||v[z]){return}var Aa;if(z==="print"){Aa=i}else{if(z==="include"){Aa=Y}else{if(T[z]){Aa="$utils."+z}else{if(F[z]){Aa="$helpers."+z}else{Aa="$data."+z}}}}t+=z+"="+Aa+",";v[z]=true});return w+"\n"}}if(typeof define==="function"){define(function(){return X})}else{if(typeof exports!=="undefined"){module.exports=X}else{this.template=X}}})();