(function(D,F){var B=D.document,E=B.documentElement,I=function(){var H=B.body,K=!-[1,],A=K&&/msie 6/.test(navigator.userAgent.toLowerCase()),J=1,P="cache"+(+new Date+"").slice(-8),L={},Q=function(){};Q.prototype={getOptions:function(U){var S,T={},R={container:null,overlay:true,drag:true,fixed:true,follow:null,followX:0,followY:0,autoClose:0,lock:false,callback:null};for(S in R){T[S]=U[S]!==F?U[S]:R[S]}Q.data("options",T);return T},setBodyBg:function(){if(H.currentStyle.backgroundAttachment!=="fixed"){H.style.backgroundImage="url(about:blank)";H.style.backgroundAttachment="fixed"}},appendIframe:function(R){R.innerHTML='<iframe style="position:absolute;left:0;top:0;width:100%;height:100%;z-index:-1;border:0 none;filter:alpha(opacity=0)"></iframe>'},setFollow:function(U,S,T,R){S=typeof S==="string"?B.getElementById(S):S;U=U.style;U.position="absolute";U.left=Q.getOffset(S,"left")+T+"px";U.top=Q.getOffset(S,"top")+R+"px"},setPosition:function(T,R){var S=T.style;S.position=A?"absolute":R?"fixed":"absolute";if(R){if(A){S.setExpression("top",'fuckIE6=document.documentElement.scrollTop+document.documentElement.clientHeight/2+"px"')}else{S.top="50%"}S.left="50%"}else{A&&S.removeExpression("top");S.top=E.clientHeight/2+Q.getScroll("top")+"px";S.left=E.clientWidth/2+Q.getScroll("left")+"px"}},createOverlay:function(){var S=B.createElement("div"),R=S.style;R.cssText="margin:0;padding:0;border:none;width:100%;height:100%;background:#333;opacity:0.6;filter:alpha(opacity=60);z-index:9999;position:fixed;top:0;left:0;";if(A){H.style.height="100%";R.position="absolute";R.setExpression("top",'fuckIE6=document.documentElement.scrollTop+"px"')}S.id="overlay";return S},createDialogBox:function(){var R=B.createElement("div");R.style.cssText="margin:0;padding:0;border:none;z-index:10000;";R.id="easyDialogBox";return R},createDialogWrap:function(T){var R=typeof T.yesFn==="function"?'<button class="btn_highlight" id="easyDialogYesBtn">'+(typeof T.yesText==="string"?T.yesText:"\u786e\u5b9a")+"</button>":"",S=typeof T.noFn==="function"||T.noFn===true?'<button class="btn_normal" id="easyDialogNoBtn">'+(typeof T.noText==="string"?T.noText:"\u53d6\u6d88")+"</button>":"";T=['<div class="easyDialog_content">',T.header?'<h4 class="easyDialog_title" id="easyDialogTitle"><a href="javascript:void(0)" title="\u5173\u95ed\u7a97\u53e3" class="close_btn" id="closeBtn">&times;</a>'+T.header+"</h4>":"",'<div class="easyDialog_text">'+T.content+"</div>",R===""&&S===""?"":'<div class="easyDialog_footer">'+S+R+"</div>","</div>"].join("");R=B.getElementById("easyDialogWrapper");if(!R){R=B.createElement("div");R.id="easyDialogWrapper";R.className="easyDialog_wrapper"}R.innerHTML=T.replace(/<[\/]*script[\s\S]*?>/ig,"");return R}};Q.data=function(T,R,S){if(typeof T==="string"){if(R!==F){L[T]=R}return L[T]}else{if(typeof T==="object"){T=T===D?0:T.nodeType===9?1:T[P]?T[P]:T[P]=++J;T=L[T]?L[T]:L[T]={};if(S!==F){T[R]=S}return T[R]}}};Q.removeData=function(U,S){if(typeof U==="string"){delete L[U]}else{if(typeof U==="object"){var T=U===D?0:U.nodeType===9?1:U[P];if(T!==F){var R=function(X){for(var W in X){return false}return true},V=function(){delete L[T];if(!(T<=1)){try{delete U[P]}catch(W){U.removeAttribute(P)}}};if(S){delete L[T][S];R(L[T])&&V()}else{V()}}}}};Q.event={bind:function(U,S,T){var R=Q.data(U,"e"+S)||Q.data(U,"e"+S,[]);R.push(T);if(R.length===1){T=this.eventHandler(U);Q.data(U,S+"Handler",T);if(U.addEventListener){U.addEventListener(S,T,false)}else{U.attachEvent&&U.attachEvent("on"+S,T)}}},unbind:function(V,T,U){var R=Q.data(V,"e"+T);if(R){if(U){for(var W=R.length-1,S=R[W];W>=0;W--){S===U&&R.splice(W,1)}}else{R=F}if(!R||!R.length){U=Q.data(V,T+"Handler");if(V.addEventListener){V.removeEventListener(T,U,false)}else{V.attachEvent&&V.detachEvent("on"+T,U)}Q.removeData(V,T+"Handler");Q.removeData(V,"e"+T)}}},eventHandler:function(R){return function(T){T=Q.event.fixEvent(T||D.event);for(var U=Q.data(R,"e"+T.type),S=0,V;V=U[S++];){if(V.call(R,T)===false){T.preventDefault();T.stopPropagation()}}}},fixEvent:function(T){if(T.target){return T}var R={},S;R.target=T.srcElement||document;R.preventDefault=function(){T.returnValue=false};R.stopPropagation=function(){T.cancelBubble=true};for(S in T){R[S]=T[S]}return R}};Q.capitalize=function(S){var R=S.charAt(0);return R.toUpperCase()+S.replace(R,"")};Q.getScroll=function(R){R=this.capitalize(R);return E["scroll"+R]||H["scroll"+R]};Q.getOffset=function(U,S){var T=this.capitalize(S);T=E["client"+T]||H["client"+T]||0;var R=this.getScroll(S),V=U.getBoundingClientRect();return Math.round(V[S])+R-T};Q.drag=function(d,Y){var Z="getSelection" in D?function(){D.getSelection().removeAllRanges()}:function(){try{B.selection.empty()}catch(a){}},R=this,g=R.event,X=false,V=K?d:B,U=Y.style.position==="fixed",T=Q.data("options").fixed;g.bind(d,"mousedown",function(a){X=true;var f=R.getScroll("top"),b=R.getScroll("left"),c=U?0:b,e=U?0:f;Q.data("dragData",{x:a.clientX-R.getOffset(Y,"left")+(U?b:0),y:a.clientY-R.getOffset(Y,"top")+(U?f:0),el:c,et:e,er:c+E.clientWidth-Y.offsetWidth,eb:e+E.clientHeight-Y.offsetHeight});if(K){A&&T&&Y.style.removeExpression("top");d.setCapture()}g.bind(V,"mousemove",W);g.bind(V,"mouseup",S);K&&g.bind(d,"losecapture",S);a.stopPropagation();a.preventDefault()});var W=function(f){if(X){Z();var e=Q.data("dragData"),a=f.clientX-e.x,j=f.clientY-e.y,b=e.et,h=e.er,l=e.eb;e=e.el;var c=Y.style;c.marginLeft=c.marginTop="0px";c.left=(a<=e?e:a>=h?h:a)+"px";c.top=(j<=b?b:j>=l?l:j)+"px";f.stopPropagation()}},S=function(a){X=false;K&&g.unbind(d,"losecapture",arguments.callee);g.unbind(V,"mousemove",W);g.unbind(V,"mouseup",arguments.callee);if(K){d.releaseCapture();if(A&&T){var b=parseInt(Y.style.top)-R.getScroll("top");Y.style.setExpression("top","fuckIE6=document.documentElement.scrollTop+"+b+'+"px"')}}a.stopPropagation()}};var O,M=function(R){R.keyCode===27&&N.close()},N={open:function(o){var d=new Q,g=d.getOptions(o||{});o=Q.event;var R=E.clientWidth,p=E.clientHeight,Z=this,X,V,T,Y;if(O){clearTimeout(O);O=F}if(g.overlay){X=B.getElementById("overlay");if(!X){X=d.createOverlay();H.appendChild(X);A&&d.appendIframe(X)}X.style.display="block"}A&&d.setBodyBg();V=B.getElementById("easyDialogBox");if(!V){V=d.createDialogBox();H.appendChild(V)}if(g.follow){Y=function(){d.setFollow(V,g.follow,g.followX,g.followY)};Y();o.bind(D,"resize",Y);Q.data("follow",Y);if(X){X.style.display="none"}g.fixed=false}else{d.setPosition(V,g.fixed)}V.style.display="block";T=typeof g.container==="string"?B.getElementById(g.container):d.createDialogWrap(g.container);if(Y=V.getElementsByTagName("*")[0]){if(Y&&T!==Y){Y.style.display="none";H.appendChild(Y);V.appendChild(T)}}else{V.appendChild(T)}T.style.display="block";var S=T.offsetWidth,W=T.offsetHeight;Y=S>R;var U=W>p;T.style.marginTop=T.style.marginRight=T.style.marginBottom=T.style.marginLeft="0px";if(g.follow){V.style.marginLeft=V.style.marginTop="0px"}else{V.style.marginLeft="-"+(Y?R/2:S/2)+"px";V.style.marginTop="-"+(U?p/2:W/2)+"px"}if(A&&!g.overlay){V.style.width=S+"px";V.style.height=W+"px"}R=B.getElementById("closeBtn");p=B.getElementById("easyDialogTitle");T=B.getElementById("easyDialogYesBtn");S=B.getElementById("easyDialogNoBtn");T&&o.bind(T,"click",function(a){g.container.yesFn.call(Z,a)!==false&&Z.close()});if(S){W=function(a){if(g.container.noFn===true||g.container.noFn.call(Z,a)!==false){Z.close()}};o.bind(S,"click",W);R&&o.bind(R,"click",W)}else{R&&o.bind(R,"click",Z.close)}g.lock||o.bind(B,"keyup",M);if(g.autoClose&&typeof g.autoClose==="number"){O=setTimeout(Z.close,g.autoClose)}if(g.drag&&p&&!Y&&!U){p.style.cursor="move";Q.drag(p,V)}if(!g.follow&&!g.fixed){W=function(){d.setPosition(V,false)};!Y&&!U&&o.bind(D,"resize",W);Q.data("resize",W)}Q.data("dialogElements",{overlay:X,dialogBox:V,closeBtn:R,dialogTitle:p,dialogYesBtn:T,dialogNoBtn:S})},close:function(){var T=Q.data("options"),R=Q.data("dialogElements"),S=Q.event;if(O){clearTimeout(O);O=F}if(T.overlay&&R.overlay){R.overlay.style.display="none"}R.dialogBox.style.display="none";A&&R.dialogBox.style.removeExpression("top");R.closeBtn&&S.unbind(R.closeBtn,"click");R.dialogTitle&&S.unbind(R.dialogTitle,"mousedown");R.dialogYesBtn&&S.unbind(R.dialogYesBtn,"click");R.dialogNoBtn&&S.unbind(R.dialogNoBtn,"click");if(!T.follow&&!T.fixed){S.unbind(D,"resize",Q.data("resize"));Q.removeData("resize")}if(T.follow){S.unbind(D,"resize",Q.data("follow"));Q.removeData("follow")}T.lock||S.unbind(B,"keyup",M);typeof T.callback==="function"&&T.callback.call(N);Q.removeData("options");Q.removeData("dialogElements")}};return N},C=function(){D.easyDialog=I()},G=function(){if(!B.body){try{E.doScroll("left")}catch(A){setTimeout(G,1);return}C()}};(function(){if(B.body){C()}else{if(B.addEventListener){B.addEventListener("DOMContentLoaded",function(){B.removeEventListener("DOMContentLoaded",arguments.callee,false);C()},false);D.addEventListener("load",C,false)}else{if(B.attachEvent){B.attachEvent("onreadystatechange",function(){if(B.readyState==="complete"){B.detachEvent("onreadystatechange",arguments.callee);C()}});D.attachEvent("onload",C);var A=false;try{A=D.frameElement==null}catch(H){}E.doScroll&&A&&G()}}}})()})(window,undefined);