function addToCart1(G,C){var F=new Object();var B=new Array();var H=new Array();var A=1;var D=document.forms["ECS_FORMBUY"];var E=0;if(D){B=getSelectedAttributes(D);if(D.elements["number"]){A=D.elements["number"].value}E=1}F.quick=E;F.spec=B;F.goods_id=G;F.number=A;F.parent=(typeof(C)=="undefined")?0:parseInt(C);Ajax.call("home-cart-add","goods="+$.toJSON(F),addToCartResponse1,"POST","JSON")}function addToCartResponse1(A){if(A.error>0){if(A.error==2){if(confirm(A.message)){location.href="user.php?act=add_booking&id="+A.goods_id+"&spec="+A.product_spec}}else{if(A.error==6){openSpeDiv1(A.message,A.goods_id,A.parent)}else{alert(A.message)}}}else{var C=document.getElementById("ECS_CARTINFO");var B="home-cart-add?step=cart";if(C){C.innerHTML=A.content}if(A.one_step_buy=="1"){location.href=B}else{location.href=B}}}function openSpeDiv1(L,D,K){var F="speDiv";var J="mask";if(docEle(F)){document.removeChild(docEle(F))}if(docEle(J)){document.removeChild(docEle(J))}var A;if(typeof window.pageYOffset!="undefined"){A=window.pageYOffset}else{if(typeof document.compatMode!="undefined"&&document.compatMode!="BackCompat"){A=document.documentElement.scrollTop}else{if(typeof document.body!="undefined"){A=document.body.scrollTop}}}var G=0;var I=document.getElementsByTagName("select");while(I[G]){I[G].style.visibility="hidden";G++}var B=document.createElement("div");B.id=F;B.style.position="absolute";B.style.zIndex="10000";B.style.width="300px";B.style.height="260px";B.style.top=(parseInt(A+200))+"px";B.style.left=(parseInt(document.body.offsetWidth)-200)/2+"px";B.style.overflow="auto";B.style.background="#FFF";B.style.border="3px solid #59B0FF";B.style.padding="5px";B.innerHTML='<h4 style="font-size:14; margin:15 0 0 15;">'+select_spe+"</h4>";for(var E=0;E<L.length;E++){B.innerHTML+='<hr style="color: #EBEBED; height:1px;"><h6 style="text-align:left; background:#ffffff; margin-left:15px;">'+L[E]["name"]+"</h6>";if(L[E]["attr_type"]==1){for(var H=0;H<L[E]["values"].length;H++){if(H==0){B.innerHTML+="<input style='margin-left:15px;' type='radio' name='spec_"+L[E]["attr_id"]+"' value='"+L[E]["values"][H]["id"]+"' id='spec_value_"+L[E]["values"][H]["id"]+"' checked /><font color=#555555>"+L[E]["values"][H]["label"]+"</font> ["+L[E]["values"][H]["format_price"]+"]</font><br />"}else{B.innerHTML+="<input style='margin-left:15px;' type='radio' name='spec_"+L[E]["attr_id"]+"' value='"+L[E]["values"][H]["id"]+"' id='spec_value_"+L[E]["values"][H]["id"]+"' /><font color=#555555>"+L[E]["values"][H]["label"]+"</font> ["+L[E]["values"][H]["format_price"]+"]</font><br />"}}B.innerHTML+="<input type='hidden' name='spec_list' value='"+H+"' />"}else{for(var H=0;H<L[E]["values"].length;H++){B.innerHTML+="<input style='margin-left:15px;' type='checkbox' name='spec_"+L[E]["attr_id"]+"' value='"+L[E]["values"][H]["id"]+"' id='spec_value_"+L[E]["values"][H]["id"]+"' /><font color=#555555>"+L[E]["values"][H]["label"]+" ["+L[E]["values"][H]["format_price"]+"]</font><br />"}B.innerHTML+="<input type='hidden' name='spec_list' value='"+H+"' />"}}B.innerHTML+="<br /><center>[<a href='javascript:submit_div1("+D+","+K+")' class='f6' >"+btn_buy+"</a>]&nbsp;&nbsp;[<a href='javascript:cancel_div()' class='f6' >"+is_cancel+"</a>]</center>";document.body.appendChild(B);var C=document.createElement("div");C.id=J;C.style.position="absolute";C.style.zIndex="9999";C.style.width=document.body.scrollWidth+"px";C.style.height=document.body.scrollHeight+"px";C.style.top="0px";C.style.left="0px";C.style.background="#FFF";C.style.filter="alpha(opacity=30)";C.style.opacity="0.40";document.body.appendChild(C)}function submit_div1(C,H){var E=new Object();var B=new Array();var J=new Array();var A=1;var F=document.getElementsByTagName("input");var L=1;var B=new Array();var D=0;for(K=0;K<F.length;K++){var I=F[K].name.substr(0,5);if(I=="spec_"&&(((F[K].type=="radio"||F[K].type=="checkbox")&&F[K].checked))){B[D]=F[K].value;D++}}E.quick=L;E.spec=B;E.goods_id=C;E.number=A;E.parent=(typeof(H)=="undefined")?0:parseInt(H);Ajax.call("home-cart-add","goods="+$.toJSON(E),addToCartResponse1,"POST","JSON");document.body.removeChild(docEle("speDiv"));document.body.removeChild(docEle("mask"));var K=0;var G=document.getElementsByTagName("select");while(G[K]){G[K].style.visibility="";K++}}function addToCart(G,C){var F=new Object();var B=new Array();var H=new Array();var A=1;var D=document.forms["ECS_FORMBUY"];var E=0;if(D){B=getSelectedAttributes(D);if(D.elements["number"]){A=D.elements["number"].value}E=1}F.quick=E;F.spec=B;F.goods_id=G;F.number=A;F.parent=(typeof(C)=="undefined")?0:parseInt(C);Ajax.call("home-cart-add","goods="+$.toJSON(F),addToCartResponse,"POST","JSON")}function getSelectedAttributes(B){var A=new Array();var D=0;for(i=0;i<B.elements.length;i++){var C=B.elements[i].name.substr(0,5);if(C=="spec_"&&(((B.elements[i].type=="radio"||B.elements[i].type=="checkbox")&&B.elements[i].checked)||B.elements[i].tagName=="SELECT")){A[D]=B.elements[i].value;D++}}return A}function addToCartResponse(A){if(A.error>0){if(A.error==2){if(confirm(A.message)){location.href="user.php?act=add_booking&id="+A.goods_id+"&spec="+A.product_spec}}else{if(A.error==6){openSpeDiv(A.message,A.goods_id,A.parent)}else{alert(A.message)}}}else{var C=document.getElementById("ECS_CARTINFO");var B="flow.php?step=cart";if(C){C.innerHTML=A.content}if(A.one_step_buy=="1"){location.href=B}else{switch(A.confirm_type){case"1":if(confirm(A.message)){location.href=B}break;case"2":if(!confirm(A.message)){location.href=B}break;case"3":location.href=B;break;default:easyDialog.open({container:"cart_show"});break}}}}function collect(A){Ajax.call("user.php?act=collect","id="+A,collectResponse,"GET","JSON")}function collectResponse(A){alert(A.message)}function signInResponse(B){toggleLoader(false);var A=B.substr(0,1);var C=B.substr(2);if(A==1){document.getElementById("member-zone").innerHTML=C}else{alert(C)}}function gotoPage(C,B,A){Ajax.call("comment.php?act=gotopage","page="+C+"&id="+B+"&type="+A,gotoPageResponse,"GET","JSON")}function gotoPageResponse(A){document.getElementById("ECS_COMMENT").innerHTML=A.content}function gotoBuyPage(B,A){Ajax.call("goods.php?act=gotopage","page="+B+"&id="+A,gotoBuyPageResponse,"GET","JSON")}function gotoBuyPageResponse(A){document.getElementById("ECS_BOUGHT").innerHTML=A.result}function getFormatedPrice(A){if(currencyFormat.indexOf("%s")>-1){return currencyFormat.replace("%s",advFormatNumber(A,2))}else{if(currencyFormat.indexOf("%d")>-1){return currencyFormat.replace("%d",advFormatNumber(A,0))}else{return A}}}function bid(A){var E="";var B="";if(A!=-1){var D=document.forms["formBid"];E=D.elements["price"].value;id=D.elements["snatch_id"].value;if(E.length==0){B+=price_not_null+"\n"}else{var C=/^[\.0-9]+/;if(!C.test(E)){B+=price_not_number+"\n"}}}else{E=A}if(B.length>0){alert(B);return}Ajax.call("snatch.php?act=bid&id="+id,"price="+E,bidResponse,"POST","JSON")}function bidResponse(A){if(A.error==0){document.getElementById("ECS_SNATCH").innerHTML=A.content;if(document.forms["formBid"]){document.forms["formBid"].elements["price"].focus()}newPrice()}else{alert(A.content)}}function newPrice(A){Ajax.call("snatch.php?act=new_price_list&id="+A,"",newPriceResponse,"GET","TEXT")}function newPriceResponse(A){document.getElementById("ECS_PRICE_LIST").innerHTML=A}function getAttr(D){var C=document.getElementsByTagName("tbody");for(i=0;i<C.length;i++){if(C[i].id.substr(0,10)=="goods_type"){C[i].style.display="none"}}var B="goods_type_"+D;try{document.getElementById(B).style.display=""}catch(A){}}function advFormatNumber(C,F){var A=formatNumber(C,F);var B=parseFloat(A);if(C.toString().length>A.length){var D=C.toString().substring(A.length,A.length+1);var H=parseFloat(D);if(H<5){return A}else{var E,G;if(F==0){G=1}else{E="0.";for(var I=1;I<F;I++){E+="0"}E+="1";G=parseFloat(E)}A=formatNumber(B+G,F)}}return A}function formatNumber(D,C){var F,E,A,B;F=D.toString();E=F.indexOf(".");A=F.length;if(C==0){if(E!=-1){F=F.substring(0,E)}}else{if(E==-1){F=F+".";for(B=1;B<=C;B++){F=F+"0"}}else{F=F.substring(0,E+C+1);for(B=A;B<=E+C;B++){F=F+"0"}}}return F}function set_insure_status(){var B=getRadioValue("shipping");var A=0;if(B>0){if(document.forms["theForm"].elements["insure_"+B]){A=document.forms["theForm"].elements["insure_"+B].value}if(document.forms["theForm"].elements["need_insure"]){document.forms["theForm"].elements["need_insure"].checked=false}if(document.getElementById("ecs_insure_cell")){if(A>0){document.getElementById("ecs_insure_cell").style.display="";setValue(document.getElementById("ecs_insure_fee_cell"),getFormatedPrice(A))}else{document.getElementById("ecs_insure_cell").style.display="none";setValue(document.getElementById("ecs_insure_fee_cell"),"")}}}}function changePayment(A){calculateOrderFee()}function getCoordinate(A){var B={"x":0,"y":0};B.x=document.body.offsetLeft;B.y=document.body.offsetTop;do{B.x+=A.offsetLeft;B.y+=A.offsetTop;A=A.offsetParent}while(A.tagName.toUpperCase()!="BODY");return B}function showCatalog(A){var B=getCoordinate(A);var C=document.getElementById("ECS_CATALOG");if(C&&C.style.display!="block"){C.style.display="block";C.style.left=B.x+"px";C.style.top=(B.y+A.offsetHeight-1)+"px"}}function hideCatalog(A){var B=document.getElementById("ECS_CATALOG");if(B&&B.style.display!="none"){B.style.display="none"}}function sendHashMail(){Ajax.call("user.php?act=send_hash_mail","",sendHashMailResponse,"GET","JSON")}function sendHashMailResponse(A){alert(A.message)}function orderQuery(){var B=document.forms["ecsOrderQuery"]["order_sn"].value;var A=/^[\.0-9]+/;if(B.length<10||!A.test(B)){alert(invalid_order_sn);return}Ajax.call("user.php?act=order_query&order_sn=s"+B,"",orderQueryResponse,"GET","JSON")}function orderQueryResponse(A){if(A.message.length>0){alert(A.message)}if(A.error==0){var B=document.getElementById("ECS_ORDER_QUERY");B.innerHTML=A.content}}function display_mode(B){document.getElementById("display").value=B;setTimeout(A,0);function A(){document.forms["listform"].submit()}}function display_mode_wholesale(B){document.getElementById("display").value=B;setTimeout(A,0);function A(){document.forms["wholesale_goods"].action="wholesale.php";document.forms["wholesale_goods"].submit()}}function fixpng(){var C=navigator.appVersion.split("MSIE");var D=parseFloat(C[1]);if((D>=5.5)&&(document.body.filters)){for(var E=0;E<document.images.length;E++){var A=document.images[E];var J=A.src.toUpperCase();if(J.substring(J.length-3,J.length)=="PNG"){var F=(A.id)?"id='"+A.id+"' ":"";var H=(A.className)?"class='"+A.className+"' ":"";var G=(A.title)?"title='"+A.title+"' ":"title='"+A.alt+"' ";var I="display:inline-block;"+A.style.cssText;if(A.align=="left"){I="float:left;"+I}if(A.align=="right"){I="float:right;"+I}if(A.parentElement.href){I="cursor:hand;"+I}var B="<span "+F+H+G+' style="width:'+A.width+"px; height:"+A.height+"px;"+I+";filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+A.src+"', sizingMethod='scale');\"></span>";A.outerHTML=B;E=E-1}}}}function hash(D,A){var A=A?A:32;var E=0;var B=0;var C="";filllen=A-D.length%A;for(B=0;B<filllen;B++){D+="0"}while(E<D.length){C=stringxor(C,D.substr(E,A));E+=A}return C}function stringxor(D,F){var C="";var E="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";var G=Math.max(D.length,F.length);for(var B=0;B<G;B++){var A=D.charCodeAt(B)^F.charCodeAt(B);C+=E.charAt(A%52)}return C}var evalscripts=new Array();function evalscript(A){if(A.indexOf("<script")==-1){return A}var B=/<script[^\>]*?src=\"([^\>]*?)\"[^\>]*?(reload=\"1\")?(?:charset=\"([\w\-]+?)\")?><\/script>/ig;var C=new Array();while(C=B.exec(A)){appendscript(C[1],"",C[2],C[3])}return A}function $$(A){return document.getElementById(A)}function appendscript(F,D,A,G){var E=hash(F+D);if(!A&&in_array(E,evalscripts)){return}if(A&&$$(E)){$$(E).parentNode.removeChild($$(E))}evalscripts.push(E);var C=document.createElement("script");C.type="text/javascript";C.id=E;try{if(F){C.src=F}else{if(D){C.text=D}}$$("append_parent").appendChild(C)}catch(B){}}function in_array(A,C){if(typeof A=="string"||typeof A=="number"){for(var B in C){if(C[B]==A){return true}}}return false}var pmwinposition=new Array();var userAgent=navigator.userAgent.toLowerCase();var is_opera=userAgent.indexOf("opera")!=-1&&opera.version();var is_moz=(navigator.product=="Gecko")&&userAgent.substr(userAgent.indexOf("firefox")+8,3);var is_ie=(userAgent.indexOf("msie")!=-1&&!is_opera)&&userAgent.substr(userAgent.indexOf("msie")+5,3);function pmwin(H,D){var G=document.getElementsByTagName("OBJECT");if(H=="open"){for(i=0;i<G.length;i++){if(G[i].style.visibility!="hidden"){G[i].setAttribute("oldvisibility",G[i].style.visibility);G[i].style.visibility="hidden"}}var F=document.body.clientWidth;var E=document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight;var C=document.body.scrollTop?document.body.scrollTop:document.documentElement.scrollTop;var B=800;var A=E*0.9;if(!$$("pmlayer")){div=document.createElement("div");div.id="pmlayer";div.style.width=B+"px";div.style.height=A+"px";div.style.left=((F-B)/2)+"px";div.style.position="absolute";div.style.zIndex="999";$$("append_parent").appendChild(div);$$("pmlayer").innerHTML='<div style="width: 800px; background: #666666; margin: 5px auto; text-align: left"><div style="width: 800px; height: '+A+'px; padding: 1px; background: #FFFFFF; border: 1px solid #7597B8; position: relative; left: -6px; top: -3px"><div onmousedown="pmwindrag(event, 1)" onmousemove="pmwindrag(event, 2)" onmouseup="pmwindrag(event, 3)" style="cursor: move; position: relative; left: 0px; top: 0px; width: 800px; height: 30px; margin-bottom: -30px;"></div><a href="###" onclick="pmwin(\'close\')"><img style="position: absolute; right: 20px; top: 15px" src="images/close.gif" title="关闭" /></a><iframe id="pmframe" name="pmframe" style="width:'+B+'px;height:100%" allowTransparency="true" frameborder="0"></iframe></div></div>'}$$("pmlayer").style.display="";$$("pmlayer").style.top=((E-A)/2+C)+"px";if(!D){pmframe.location="pm.php"}else{pmframe.location="pm.php?"+D}}else{if(H=="close"){for(i=0;i<G.length;i++){if(G[i].attributes["oldvisibility"]){G[i].style.visibility=G[i].attributes["oldvisibility"].nodeValue;G[i].removeAttribute("oldvisibility")}}hiddenobj=new Array();$$("pmlayer").style.display="none"}}}var pmwindragstart=new Array();function pmwindrag(A,B){if(B==1){pmwindragstart=is_ie?[event.clientX,event.clientY]:[A.clientX,A.clientY];pmwindragstart[2]=parseInt($$("pmlayer").style.left);pmwindragstart[3]=parseInt($$("pmlayer").style.top);doane(A)}else{if(B==2&&pmwindragstart[0]){var C=is_ie?[event.clientX,event.clientY]:[A.clientX,A.clientY];$$("pmlayer").style.left=(pmwindragstart[2]+C[0]-pmwindragstart[0])+"px";$$("pmlayer").style.top=(pmwindragstart[3]+C[1]-pmwindragstart[1])+"px";doane(A)}else{if(B==3){pmwindragstart=[];doane(A)}}}}function doane(A){e=A?A:window.event;if(is_ie){e.returnValue=false;e.cancelBubble=true}else{if(e){e.stopPropagation();e.preventDefault()}}}function addPackageToCart(C){var A=new Object();var B=1;A.package_id=C;A.number=B;Ajax.call("flow.php?step=add_package_to_cart","package_info="+$.toJSON(A),addPackageToCartResponse,"POST","JSON")}function addPackageToCartResponse(A){if(A.error>0){if(A.error==2){if(confirm(A.message)){location.href="user.php?act=add_booking&id="+A.goods_id}}else{alert(A.message)}}else{var C=document.getElementById("shoppingCarNone");var B="flow.php?step=cart";if(C){C.innerHTML=A.content}if(A.one_step_buy=="1"){location.href=B}else{switch(A.confirm_type){case"1":if(confirm(A.message)){location.href=B}break;case"2":if(!confirm(A.message)){location.href=B}break;case"3":location.href=B;break;default:break}}}}function setSuitShow(A){var B=document.getElementById("suit_"+A);if(B==null){return}if(B.style.display=="none"){B.style.display=""}else{B.style.display="none"}}function docEle(){return document.getElementById(arguments[0])||false}function openSpeDiv(L,D,K){var F="speDiv";var J="mask";if(docEle(F)){document.removeChild(docEle(F))}if(docEle(J)){document.removeChild(docEle(J))}var A;if(typeof window.pageYOffset!="undefined"){A=window.pageYOffset}else{if(typeof document.compatMode!="undefined"&&document.compatMode!="BackCompat"){A=document.documentElement.scrollTop}else{if(typeof document.body!="undefined"){A=document.body.scrollTop}}}var G=0;var I=document.getElementsByTagName("select");while(I[G]){I[G].style.visibility="hidden";G++}var B=document.createElement("div");B.id=F;B.style.position="absolute";B.style.zIndex="10000";B.style.width="300px";B.style.height="260px";B.style.top=(parseInt(A+200))+"px";B.style.left=(parseInt(document.body.offsetWidth)-200)/2+"px";B.style.overflow="auto";B.style.background="#FFF";B.style.border="3px solid #59B0FF";B.style.padding="5px";B.innerHTML='<h4 style="font-size:14; margin:15 0 0 15;">'+select_spe+"</h4>";for(var E=0;E<L.length;E++){B.innerHTML+='<hr style="color: #EBEBED; height:1px;"><h6 style="text-align:left; background:#ffffff; margin-left:15px;">'+L[E]["name"]+"</h6>";if(L[E]["attr_type"]==1){for(var H=0;H<L[E]["values"].length;H++){if(H==0){B.innerHTML+="<input style='margin-left:15px;' type='radio' name='spec_"+L[E]["attr_id"]+"' value='"+L[E]["values"][H]["id"]+"' id='spec_value_"+L[E]["values"][H]["id"]+"' checked /><font color=#555555>"+L[E]["values"][H]["label"]+"</font> ["+L[E]["values"][H]["format_price"]+"]</font><br />"}else{B.innerHTML+="<input style='margin-left:15px;' type='radio' name='spec_"+L[E]["attr_id"]+"' value='"+L[E]["values"][H]["id"]+"' id='spec_value_"+L[E]["values"][H]["id"]+"' /><font color=#555555>"+L[E]["values"][H]["label"]+"</font> ["+L[E]["values"][H]["format_price"]+"]</font><br />"}}B.innerHTML+="<input type='hidden' name='spec_list' value='"+H+"' />"}else{for(var H=0;H<L[E]["values"].length;H++){B.innerHTML+="<input style='margin-left:15px;' type='checkbox' name='spec_"+L[E]["attr_id"]+"' value='"+L[E]["values"][H]["id"]+"' id='spec_value_"+L[E]["values"][H]["id"]+"' /><font color=#555555>"+L[E]["values"][H]["label"]+" ["+L[E]["values"][H]["format_price"]+"]</font><br />"}B.innerHTML+="<input type='hidden' name='spec_list' value='"+H+"' />"}}B.innerHTML+="<br /><center>[<a href='javascript:submit_div("+D+","+K+")' class='f6' >"+btn_buy+"</a>]&nbsp;&nbsp;[<a href='javascript:cancel_div()' class='f6' >"+is_cancel+"</a>]</center>";document.body.appendChild(B);var C=document.createElement("div");C.id=J;C.style.position="absolute";C.style.zIndex="9999";C.style.width=document.body.scrollWidth+"px";C.style.height=document.body.scrollHeight+"px";C.style.top="0px";C.style.left="0px";C.style.background="#FFF";C.style.filter="alpha(opacity=30)";C.style.opacity="0.40";document.body.appendChild(C)}function submit_div(C,H){var E=new Object();var B=new Array();var J=new Array();var A=1;var F=document.getElementsByTagName("input");var L=1;var B=new Array();var D=0;for(K=0;K<F.length;K++){var I=F[K].name.substr(0,5);if(I=="spec_"&&(((F[K].type=="radio"||F[K].type=="checkbox")&&F[K].checked))){B[D]=F[K].value;D++}}E.quick=L;E.spec=B;E.goods_id=C;E.number=A;E.parent=(typeof(H)=="undefined")?0:parseInt(H);Ajax.call("flow.php?step=add_to_cart","goods="+$.toJSON(E),addToCartResponse,"POST","JSON");document.body.removeChild(docEle("speDiv"));document.body.removeChild(docEle("mask"));var K=0;var G=document.getElementsByTagName("select");while(G[K]){G[K].style.visibility="";K++}}function cancel_div(){document.body.removeChild(docEle("speDiv"));document.body.removeChild(docEle("mask"));var A=0;var B=document.getElementsByTagName("select");while(B[A]){B[A].style.visibility="";A++}};