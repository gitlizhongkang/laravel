$(document).on("change",".province",function(){var B=$(this);var A=B.val();if(A==""){return false}$.ajax({type:"post",url:"home-personal-getDistrict",headers:{"X-CSRF-TOKEN":$('input[name="_token"]').val()},data:{parent_id:A},dataType:"json",success:function(D){if(D["error"]==0){var C='<option value="">请选择市</option>';$.each(D["data"],function(F,E){C+="<option value="+E["district_id"]+">"+E["district_name"]+"</option>"});B.next().html(C);B.next().next().css("display","none")}else{alert(D["msg"])}}})});$(document).on("change",".city",function(){var B=$(this);var A=B.val();if(A==""){return false}$.ajax({type:"post",url:"home-personal-getDistrict",headers:{"X-CSRF-TOKEN":$('input[name="_token"]').val()},data:{parent_id:A},dataType:"json",success:function(D){if(D["error"]==0){var C="";$.each(D["data"],function(F,E){C+='<option  name="district" value='+E["district_id"]+">"+E["district_name"]+"</option>"});B.next().html(C);B.next().css("display","")}else{alert(D["msg"])}}})});$(document).on("click","#addUserAddress",function(){var G=$(this);var F=G.parents("table").children("tbody").children("tr").eq(0).children("td").eq(1).children(".province").children("option:selected").html();var D=G.parents("table").children("tbody").children("tr").eq(0).children("td").eq(1).children(".city").children("option:selected").html();var E=G.parents("table").children("tbody").children("tr").eq(0).children("td").eq(1).children(".district").children("option:selected").html();var B=$("#address_name").val();var H=$("#tel").val();var C=$("#address").val();if($("#is_default").prop("checked")==true){var A=1}else{var A=0}if(F==""||D==""||E==""){alert("配送区域必填");return false}if(B==""){alert("收货人姓名必填");return false}if(H==""){alert("收货人电话必填");return false}if(C==""){alert("收货人详细地址必填");return false}$.ajax({type:"post",url:"home-personal-addUserAddress",headers:{"X-CSRF-TOKEN":$('input[name="_token"]').val()},data:{province:F,city:D,district:E,address_name:B,address_tel:H,address:C,is_default:A},dataType:"json",success:function(I){if(I["error"]==0){alert(I["msg"]);location.href=""}else{alert(I["msg"])}}})});$(document).on("click",".updateUserAddress",function(){var G=$(this);var F=G.parents("table").attr("address_id");var E=G.parents("table").children("tbody").children("tr").eq(0).children("td").eq(1).children(".province").children("option:selected").html();var C=G.parents("table").children("tbody").children("tr").eq(0).children("td").eq(1).children(".city").children("option:selected").html();var D=G.parents("table").children("tbody").children("tr").eq(0).children("td").eq(1).children(".district").children("option:selected").html();var B=G.parents("table").children("tbody").children("tr").eq(1).children("td").eq(1).children(".address_name").val();var H=G.parents("table").children("tbody").children("tr").eq(1).children("td").eq(3).children(".address_tel").val();var I=G.parents("table").children("tbody").children("tr").eq(2).children("td").eq(1).children(".address").val();if(G.parents("table").children("tbody").children("tr").eq(2).children("td").eq(3).children(".is_default").prop("checked")==true){var A="1"}else{var A="0"}if(E==""||C==""||D==""){alert("配送区域必填");return false}if(B==""){alert("收货人姓名必填");return false}if(H==""){alert("收货人电话必填");return false}if(I==""){alert("收货人详细地址必填");return false}$.ajax({type:"post",url:"home-personal-updateUserAddress",headers:{"X-CSRF-TOKEN":$('input[name="_token"]').val()},data:{id:F,province:E,city:C,district:D,address_name:B,address_tel:H,address:I,is_default:A},dataType:"json",success:function(J){if(J["error"]==0){alert(J["msg"]);location.href=""}else{alert(J["msg"])}}})});$(document).on("click",".delete",function(){var A=$(this);var B=A.parents("table").attr("address_id");if(confirm("你确认要删除该收货地址吗？")){$.ajax({type:"post",url:"home-personal-deleteUserAddress",headers:{"X-CSRF-TOKEN":$('input[name="_token"]').val()},data:{id:B},dataType:"json",success:function(C){if(C["error"]==0){alert(C["msg"]);A.parents("form").remove()}else{alert(C["msg"])}}})}});$(document).on("click",".addUserAddress",function(){var H=$(this);var A=$("#address_name").val();var I=$("#address_tel").val();var F=$(".province").children("option:selected").html();var C=$(".city").children("option:selected").html();var E=$(".district").children("option:selected").html();var B=$("#address").val();var G=H.parents("table").attr("address_id");if(A==""||I==""||F==""||C==""||E==""||B==""){alert("收货信息不能为空");return false}if(confirm("需要保存收货地址吗？")){$.ajax({type:"post",url:"home-personal-addUserAddress",headers:{"X-CSRF-TOKEN":$('input[name="_token"]').val()},data:{address_name:A,address_tel:I,province:F,city:C,district:E,address:B,is_default:1},dataType:"json",success:function(J){if(J["error"]==0){alert(J["msg"])}else{alert(J["msg"])}}})}var D='<div class="section-body" style="width: 450px"><span><input type="radio" name="userAddress" checked></span><span class="addr-name"> '+A+' </span><span class="addr-info">'+F+" "+C+" "+E+" "+B+' </span><span class="addr-tel">'+I+"</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>";$(".addrss").append(D)});$(document).on("click",".add",function(){var A=$(this);var B=A.attr("status");if(B==1){A.parents("li").next().css("display","block");A.attr("status","2")}else{A.parents("li").next().css("display","none");A.attr("status","1")}});