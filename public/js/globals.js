(function(B){function A(E,F,H){var D=this,I=B(this),C="beforeSwitch",G="onSwitch";B.isFunction(F[C])&&I.bind(C,F[C]),B.isFunction(F[G])&&I.bind(G,F[G]),B.extend(D,{_initPlugins:function(){var L=B.switchable.Plugins,J=L.length,K=0;for(;K<J;K++){L[K].init&&L[K].init(D)}},_init:function(){D.container=E,D.config=F,!F.panels||!F.panels.jquery&&B.type(F.panels)!=="string"?D.panels=E.children():D.panels=E.find(F.panels),D.length=Math.ceil(D.panels.length/F.steps);if(D.length<1){window.console&&console.warn("No panel in "+H);return}D.index=F.initIndex===null?undefined:F.initIndex+(F.initIndex<0?D.length:0),F.effect==="none"&&D.panels.slice(D.index*F.steps,(D.index+1)*F.steps).show();if(!!F.triggers){var M,K,L,J=[];for(K=1;K<=D.length;K++){J.push('<a href="javascript:;">'+K+"</a>")}if(F.triggers.jquery){if(F.triggers.length>1){D.triggers=F.triggers.slice(0,D.length)}else{F.triggers.html('<div class="'+F.triggersWrapCls+'">'+J.join("")+"</div>");D.triggers=F.triggers.find("a")}}else{D.triggers=B("<div />",{"class":F.triggersWrapCls,html:J.join("")})[F.putTriggers](E).find("a")}D.triggers.eq(D.index).addClass(F.currentTriggerCls);for(K=0;K<D.length;K++){M=D.triggers.eq(K),M.click({index:K},function(N){L=N.data.index;if(!D._triggerIsValid(L)){return}D._cancelDelayTimer(),D.switchTo(L)}),F.triggerType==="mouse"&&M.mouseenter({index:K},function(N){L=N.data.index;if(!D._triggerIsValid(L)){return}D._delayTimer=setTimeout(function(){D.switchTo(L)},F.delay*1000)}).mouseleave(function(){D._cancelDelayTimer()})}}},_triggerIsValid:function(J){return D.index!==J},_cancelDelayTimer:function(){D._delayTimer&&(clearTimeout(D._delayTimer),D._delayTimer=undefined)},_switchTrigger:function(J,K){D.triggers.eq(J).removeClass(F.currentTriggerCls).end().eq(K).addClass(F.currentTriggerCls)},_switchPanels:function(L,J,K){B.switchable.Effects[F.effect].call(D,L,J,K)},willTo:function(J){return J?D.index>0?D.index-1:F.loop?D.length-1:!1:D.index<D.length-1?D.index+1:F.loop?0:!1},switchTo:function(L,J){var K=B.Event(C);I.trigger(K,[L]);if(K.isDefaultPrevented()){return}return D._switchPanels(D.index,L,J),!F.triggers||D._switchTrigger(D.index,L),D.index=L,K.type=G,I.trigger(K,[L]),D}}),D._init(),D._initPlugins()}B.switchable={Config:{triggers:!0,putTriggers:"insertAfter",triggersWrapCls:"triggers",currentTriggerCls:"current",panels:null,steps:1,triggerType:"mouse",delay:0.1,initIndex:0,effect:"none",easing:"ease",duration:0.5,loop:!0,beforeSwitch:null,onSwitch:null,api:!1},Effects:{none:function(C,F){var E=this,D=E.config;E.panels.slice(C*D.steps,(C+1)*D.steps).hide().end().slice(F*D.steps,(F+1)*D.steps).show()}},Plugins:[]},B.fn.switchable=function(E){var H=B(this),C=H.length,D=H.selector,G=[],F;E=B.extend({},B.switchable.Config,E),E.effect=E.effect.toLowerCase();for(F=0;F<C;F++){G[F]=new A(H.eq(F),E,D+"["+F+"]")}return E.api?G[0]:H}})(jQuery),function(B){function A(){var G=document.documentElement,E=["Webkit","Moz"],F="transition",C="",D;if(G.style[F]!==undefined){C=F}else{for(D=0;D<2;D++){if(G.style[F=E[D]+"Transition"]!==undefined){C=F;break}}}return C}B.switchable.Anim=function(E,H,I,L,C,J){var K=this,F={},G,D;B.switchable.Transition===undefined&&(B.switchable.Transition=A()),G=B.switchable.Transition,B.extend(K,{isAnimated:!1,run:function(){if(K.isAnimated){return}I=I*1000;if(G){F[G+"Property"]=J||"all",F[G+"Duration"]=I+"ms",F[G+"TimingFunction"]=L,E.css(B.extend(H,F)),D=setTimeout(function(){K._clearCss(),K._complete()},I)}else{var M=/cubic-bezier\(([\s\d.,]+)\)/,O=L.match(M),N=B.switchable.TimingFn[L];if(N||O){L=B.switchable.Easing(O?O[1]:N.match(M)[1])}E.animate(H,I,L,function(){K._complete()})}return K.isAnimated=!0,K},stop:function(M){if(!K.isAnimated){return}return G?(clearTimeout(D),D=undefined):E.stop(!1,M),K.isAnimated=!1,K},_complete:function(){C&&C()},_clearCss:function(){F[G+"Property"]="none",E.css(F)}})}}(jQuery),function(C){function A(E){return"cubic-bezier("+E+")"}function D(E){var F=[],G=101,H;for(H=0;H<=G;H++){F[H]=E.call(null,H/G)}return function(L){if(L===1){return F[G]}var M=G*L,J=Math.floor(M),I=F[J],K=F[J+1];return I+(K-I)*(M-J)}}function B(G,H,L,M,I,F){function K(R){return((O*R+bx)*R+cx)*R}function E(R){return((ay*R+by)*R+cy)*R}function P(R){return(3*O*R+2*bx)*R+cx}function Q(R){return 1/(200*R)}function N(R,S){return E(J(R,S))}function J(X,V){function W(a){return a>=0?a:0-a}var Y,Z,T,U,R,S;for(T=X,S=0;S<8;S++){U=K(T)-X;if(W(U)<V){return T}R=P(T);if(W(R)<1e-06){break}T=T-U/R}Y=0,Z=1,T=X;if(T<Y){return Y}if(T>Z){return Z}while(Y<Z){U=K(T);if(W(U-X)<V){return T}X>U?Y=T:Z=T,T=(Z-Y)*0.5+Y}return T}var O=bx=cx=ay=by=cy=0;return cx=3*H,bx=3*(M-H)-cx,O=1-cx-bx,cy=3*L,by=3*(I-L)-cy,ay=1-cy-by,N(G,Q(F))}C.switchable.TimingFn={ease:A(".25, .1, .25, 1"),linear:A("0, 0, 1, 1"),"ease-in":A(".42, 0, 1, 1"),"ease-out":A("0, 0, .58, 1"),"ease-in-out":A(".42, 0, .58, 1")},C.switchable.Easing=function(E){var F,G,H=0;E=E.split(","),G=E.length;for(;H<G;H++){E[H]=parseFloat(E[H])}if(G!==4){window.console&&console.warn(A(E.join(", "))+" missing argument.")}else{F="cubic-bezier-"+E.join("-");if(!C.easing[F]){var I=D(function(J){return B(J,E[0],E[1],E[2],E[3],5)});C.easing[F]=function(K,L,M,J){return I.call(null,K)}}}return F}}(jQuery),function(A){A.extend(A.switchable.Config,{autoplay:!1,interval:3,pauseOnHover:!0}),A.switchable.Plugins.push({name:"autoplay",init:function(I){function B(){F=I.willTo(I.isBackward);if(F===!1){I._cancelTimers();return}I.switchTo(F,I.isBackward?"backward":"forward")}function G(){E=setInterval(function(){B()},(H.interval+H.duration)*1000)}var H=I.config,C=!1,D,E,F;if(!H.autoplay||I.length<=1){return}H.pauseOnHover&&I.panels.add(I.triggers).hover(function(){I._pause()},function(){C||I._play()}),A.extend(I,{_play:function(){I._cancelTimers(),I.paused=!1,D=setTimeout(function(){B(),G()},H.interval*1000)},_pause:function(){I._cancelTimers(),I.paused=!0},_cancelTimers:function(){D&&(clearTimeout(D),D=undefined),E&&(clearInterval(E),E=undefined)},play:function(){return I._play(),C=!1,I},pause:function(){return I._pause(),C=!0,I}}),I._play()}})}(jQuery),function(A){A.extend(A.switchable.Config,{prev:null,next:null}),A.switchable.Plugins.push({name:"carousel",init:function(I){var H=I.config,C=["backward","forward"],D=["prev","next"],E,F,B,G=0;if(!H.prev&&!H.next){return}for(;G<2;G++){E=D[G],F=H[E],F&&(B=I[E+"Btn"]=F.jquery?F:A(F),B.click({direction:C[G]},function(J){J.preventDefault();if(!I.anim){var K=J.data.direction,L=I.willTo(K===C[0]);L!==!1&&I.switchTo(L,K)}}))}}})}(jQuery),function(A){A.switchable.Effects.fade=function(C,B){var F=this,G=F.config,D=F.panels,H=D.eq(C),E=D.eq(B);F.anim&&(F.anim.stop(),D.eq(F.anim.to).css({zIndex:F.length}).end().eq(F.anim.from).css({opacity:0,zIndex:1})),E.css({opacity:1}),F.anim=(new A.switchable.Anim(H,{opacity:0},G.duration,G.easing,function(){E.css({zIndex:F.length}),H.css({zIndex:1}),F.anim=undefined},"opacity")).run(),F.anim.from=C,F.anim.to=B},A.switchable.Plugins.push({name:"fade effect",init:function(D){var B=D.config,C=D.panels.eq(D.index);if(B.effect!=="fade"||B.steps!==1){return}D.panels.not(C).css({opacity:0,zIndex:1}),C.css({opacity:1,zIndex:D.length})}})}(jQuery),function(B){var F=["scrollleft","scrollright","scrollup","scrolldown"],E="position",C="absolute",D="relative";B.extend(B.switchable.Config,{end2end:!1,groupSize:[],visible:null,clonedCls:"switchable-cloned"});for(var A=0;A<4;A++){B.switchable.Effects[F[A]]=function(G,H,O){var L=this,M=L.config,J=L.length-1,K=O==="backward",N=M.end2end&&(K&&G===0&&H===J||O==="forward"&&G===J&&H===0),I={};I[L.isHoriz?"left":"top"]=N?L._adjustPosition(K):-L.groupSize[L.isHoriz?0:1]*H,L.anim&&L.anim.stop(),L.anim=(new B.switchable.Anim(L.panels.parent(),I,M.duration,M.easing,function(){N&&L._resetPosition(K),L.anim=undefined})).run()}}B.switchable.Plugins.push({name:"scroll effect",init:function(X){var R=X.config,P=R.steps,V=X.panels,W=V.parent(),T=B.inArray(R.effect,F),U=T===0||T===1,I=V.eq(0).outerWidth(!0),J=V.eq(0).outerHeight(!0),G=U?0:1,H=X.length-1,N=U?"left":"top",S={};if(T===-1){return}X.groupSize=[R.groupSize[0]||I*P,R.groupSize[1]||J*P];if(R.end2end){var Q=V.length,O=!U&&R.groupSize[0]?X.groupSize[G]*X.length:(U?I:J)*Q,K=Q-H*P,L=(U?I:J)*K,Z=!U&&R.groupSize[0]?X.groupSize[G]:L,Y;R.loop=!0,R.visible&&R.visible<Q&&R.visible>K&&V.slice(0,R.visible).clone(!0).addClass(R.clonedCls).appendTo(W).click(function(M){M.preventDefault(),V.eq(B(this).index()-Q).click()}),B.extend(X,{_adjustPosition:function(M){return Y=M?H:0,S[E]=D,S[N]=(M?-1:1)*O,V.slice(Y*P,(Y+1)*P).css(S),M?Z:-O},_resetPosition:function(M){Y=M?H:0,S[E]="",S[N]="",V.slice(Y*P,(Y+1)*P).css(S),S[E]=undefined,S[N]=M?-X.groupSize[G]*H:0,W.css(S)}})}X.container.css(E)=="static"&&X.container.css(E,D),S[E]=C,S[N]=-X.groupSize[G]*X.index,W.css(S).css("width",U?2*X.groupSize[G]*X.length:R.groupSize[0]?R.groupSize[0]:undefined),X.isHoriz=U,X.isBackward=T===1||T===3}})}(jQuery),function(C){var A=["accordion","horizaccordion"],D=[["height","marginTop","marginBottom","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"],["width","marginLeft","marginRight","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"]];C.extend(C.switchable.Config,{multiple:!1,customProps:{}});for(var B=0;B<2;B++){C.switchable.Effects[A[B]]=function(I,G){var E=this,F=E.config,H=I!==G;E.anim&&E.anim.stop(H),E.anim=(new C.switchable.Anim(E.panels.eq(G),E.triggers.eq(G).hasClass(F.currentTriggerCls)?E.collapseProps:E.expandProps[G],F.duration,F.easing,function(){E.anim=undefined})).run(),!F.multiple&&I!==undefined&&H&&(E.anim2&&E.anim2.stop(H),E.anim2=(new C.switchable.Anim(E.panels.eq(I),E.collapseProps,F.duration,F.easing,function(){E.anim2=undefined})).run())}}C.switchable.Plugins.push({name:"accordion effect",init:function(E){var L=E.config,M=C.inArray(L.effect,A);if(M===-1||L.steps!==1){return}window.console&&console.info("Remember to set the border-width for the accordion's panels, even without border."),C.extend(E,{_triggerIsValid:function(N){return !0},_switchTrigger:function(O,P){var Q=E.triggers,N=L.currentTriggerCls;Q.eq(P).toggleClass(N),!L.multiple&&O!==undefined&&O!==P&&Q.eq(O).removeClass(N)}}),E.expandProps=[],E.collapseProps={};var I=D[M].length,J={},G,H,K;for(K=0;K<I;K++){E.collapseProps[D[M][K]]=0}C.extend(E.collapseProps,L.customProps);for(K=0;K<E.length;K++){G=E.panels.eq(K);for(var F=0;F<I;F++){H=D[M][F],J[H]=G.css(H)}E.expandProps.push(C.extend({},J)),G.css(C.extend({overflow:"hidden"},K===E.index?J:E.collapseProps))}}})}(jQuery);jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(B,E,D,A,C){return jQuery.easing[jQuery.easing.def](B,E,D,A,C)},easeInQuad:function(B,E,D,A,C){return A*(E/=C)*E+D},easeOutQuad:function(B,E,D,A,C){return -A*(E/=C)*(E-2)+D},easeInExpo:function(B,E,D,A,C){return(E==0)?D:A*Math.pow(2,10*(E/C-1))+D},easeOutExpo:function(B,E,D,A,C){return(E==C)?D+A:A*(-Math.pow(2,-10*E/C)+1)+D},easeInBack:function(C,F,E,B,A,D){if(D==undefined){D=1.70158}return B*(F/=A)*F*((D+1)*F-D)+E},easeOutBack:function(C,F,E,B,A,D){if(D==undefined){D=1.70158}return B*((F=F/A-1)*F*((D+1)*F+D)+1)+E},easeInOutBack:function(C,F,E,B,A,D){if(D==undefined){D=1.70158}if((F/=A/2)<1){return B/2*(F*F*(((D*=(1.525))+1)*F-D))+E}return B/2*((F-=2)*F*(((D*=(1.525))+1)*F+D)+2)+E},easeOutBounce:function(E,A,C,D,B){if((A/=B)<(1/2.75)){return D*(7.5625*A*A)+C}else{if(A<(2/2.75)){return D*(7.5625*(A-=(1.5/2.75))*A+0.75)+C}else{if(A<(2.5/2.75)){return D*(7.5625*(A-=(2.25/2.75))*A+0.9375)+C}else{return D*(7.5625*(A-=(2.625/2.75))*A+0.984375)+C}}}}});(function(B){B.fn.menuAim=function(C){this.each(function(){A.call(this,C)});return this};function A(O){var R=B(this),F=null,Q=[],C=null,E=null,D=B.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:B.noop,exit:B.noop,activate:B.noop,deactivate:B.noop,exitMenu:B.noop},O);var G=3,P=300;var S=function(T){Q.push({x:T.pageX,y:T.pageY});if(Q.length>G){Q.shift()}};var L=function(){if(E){clearTimeout(E)}if(D.exitMenu(this)){if(F){D.deactivate(F)}F=null}};var M=function(){if(E){clearTimeout(E)}D.enter(this);I(this)},H=function(){D.exit(this)};var N=function(){J(this)};var J=function(T){if(T.className.toLowerCase()=="current"){return}if(F){D.deactivate(F)}D.activate(T);F=T};var I=function(U){var T=K();if(T){E=setTimeout(function(){I(U)},T)}else{J(U)}};var K=function(){if(!F||!B(F).is(D.submenuSelector)){return 0}var f=R.offset(),V={x:f.left,y:f.top-D.tolerance},d={x:f.left+R.outerWidth(),y:V.y},b={x:f.left,y:f.top+R.outerHeight()+D.tolerance},g={x:f.left+R.outerWidth(),y:b.y},e=Q[Q.length-1],c=Q[0];if(!e){return 0}if(!c){c=e}if(c.x<f.left||c.x>g.x||c.y<f.top||c.y>g.y){return 0}if(C&&e.x==C.x&&e.y==C.y){return 0}function Z(i,h){return(h.y-i.y)/(h.x-i.x)}var X=d,W=g;if(D.submenuDirection=="left"){X=b;W=V}else{if(D.submenuDirection=="below"){X=g;W=b}else{if(D.submenuDirection=="above"){X=V;W=d}}}var T=Z(e,X),Y=Z(e,W),a=Z(c,X),U=Z(c,W);if(T<a&&Y>U){C=e;return P}C=null;return 0};R.mouseleave(L).find(D.rowSelector).mouseenter(M).mouseleave(H).click(N);B(document).mousemove(S)}})(jQuery);var $window=$(window);var NALA=NALA||{};(function(A){NALA.check={stopStr:/找小妹|找小姐|找学生|整形|学生妹|人流|不孕不育|[发發髮]\s*票|[发發髮]\S+票/g,isPhone:function(){var B=navigator.userAgent.toLowerCase(),C=/iPhone|iPad|Android|ucweb|windows\s+mobile|Windows\s+Phone/i;return C.test(B)},isIE6:window.VBArray&&!window.XMLHttpRequest,isNick:function(C){var B=/^[\u4e00-\u9fa5A-Za-z0-9-_]+$/;return B.test(C)},isEmail:function(C){var B=/^[a-z0-9][\w\.]*@([a-z0-9][a-z0-9-]*\.)+[a-z]{2,5}$/i;return B.test(C)},isMobile:function(C){var B=/^1[345678][0-9]{9}$/;return B.test(C)},isTelephone:function(C){var B=/^0\d{2,3}-\d{5,9}$/;return B.test(C)},isUrl:function(C){var B=/^http:\/\/([\w-]+\.)+[\w-]+(\/[\w-.\/?%&=]*)?$/;return B.test(C)},isNum:function(C){var B=/^[0-9]\d*$/;return B.test(C)}};if(NALA.check.isPhone()){A("html").addClass("isPhone");NALA.isPhone=true}else{if($window.width()<1400){A("html").addClass("is1280")}}NALA.userInfo={login:0};NALA.common={ajaxUrl:{userinfo:"/user/loginAuth3",cartData:"/cart/listJson",search:"/item/associateSearch"},cmsContentAjax:function(B,C){A.ajax({url:"/common/ajaxCmsContent",cache:false,data:{mark:B},dataType:"html",success:function(D){C(D)}})},searchBar:function(){var I=this,E=A("#search_fm"),H=E.find("input.sea_input"),F={},C=null,B=-1;_offset=null,$result=null;E.submit(function(){if(A.trim(H.val())=="请输入商品或品牌"||A.trim(H.val())==""){location.href="/item/newsearch";return false}});if(NALA.isPhone){return}$result=A('<div class="search_result"></div>').appendTo("#header");H.attr("autocomplete","off").on("focus",function(){var K=A.trim(H.val());_offset=H.offset();G();if(K==""){return false}if(K=="请输入商品或品牌"){H.val("")}else{if(F[K]!=undefined){J(K)}else{D(K)}}return false}).on("keyup",function(K){if(K.keyCode!=40&&K.keyCode!=38&&K.keyCode!=13){clearTimeout(C);C=setTimeout(function(){var L=A.trim(H.val());if(F[L]!=undefined){J(L)}else{D(L)}},300)}}).blur(function(){if(A.trim(H.val())==""){H.val("请输入商品或品牌")}}).on("keydown",function(K){var N=$result.find("li"),L=N.length,M="";if(L>0){switch(K.keyCode){case 40:B++;if(B>L-1){B=0}N.removeClass("on").eq(B).addClass("on");H.val(N.eq(B).text());break;case 38:B--;if(B<0){B=L-1}N.removeClass("on").eq(B).addClass("on");H.val(N.eq(B).text());break}}});function D(K){A.ajax({url:I.ajaxUrl.search,type:"post",data:{q:K},success:function(L){F[K]=L;J(K)}})}function J(K){var M="<ul>",L=F[K].split(",");if(L[0]!==""){A.each(L,function(O,N){M+="<li>"+N+"</li>"});$result.html(M).css({left:_offset.left,top:_offset.top,display:"block"});B=-1}else{$result.hide()}}function G(){A(document).on("click",function(K){if(K.target.id!="textfield"){$result.hide()}});$result.on("mouseenter","li",function(){var K=A(this);B=K.index();K.addClass("on").siblings("li").removeClass("on");return false}).on("click","li",function(){H.val(A(this).text());setTimeout(function(){E.submit()},300)})}},showLoginInfo:function(){var D=this,G=A("#userinfo-bar"),F=A("#hd_cartnum"),B=msgTxt="";A.ajax({url:D.ajaxUrl.userinfo,cache:false,dataType:"json",success:function(H){NALA.userInfo=H;if(H.cart>0){F.html(H.cart).css("visibility","visible")}if(H.login){B="";if(H.level==1){B="vip-ico"}else{if(H.level==2){B="svip-ico"}}A("#header_user").html('<a href="/home/" class="'+B+'">'+H.name+'</a>&nbsp;[<a href="/logout/ssoLogout">退出</a>]</li>')}}});A("#favorite_wb").click(function(){C();return false});A("#header_guanzhu").find(".more-bd").html('<div class="list"><p><iframe width="70" height="24" frameborder="0" allowtransparency="true" marginwidth="0" marginheight="0" scrolling="no" border="0" src="http://widget.weibo.com/relationship/followbutton.php?width=70&height=24&uid=5092874104&style=1&btn=red&dpc=1"></iframe></p></div>');E();function E(){var H=null;G.on("mouseenter","li.more-menu",function(){var I=A(this);H=setTimeout(function(){I.addClass("hover");H=null},300)}).on("mouseleave","li.more-menu",function(){var I=A(this);if(H!==null){clearTimeout(H)}else{H=setTimeout(function(){I.removeClass("hover")},300)}})}function C(){var H="http://www.lizi.com/",J="丽子美妆 - 专注化妆品售卖100年！";try{window.external.addFavorite(H,J)}catch(I){try{window.sidebar.addPanel(J,H,"")}catch(I){alert("对不起，您的浏览器不支持此操作！\n请您使用菜单栏或Ctrl+D收藏丽子。")}}}},toolBar:function(){var D=this,F=null,B=null,E=null,G=null,C=HTML=wideHTML="";if(NALA.isPhone){return}HTML='<div class="tb_box" id="J_toolbar"><ul class="tb_bd"><li><a href="http://wpa.b.qq.com/cgi/wpa.php?ln=1&key=XzgwMDA0MjIzN181OTY5N184MDAwNDIyMzdfMl8" class="kefu" target="_blank"><p><img src="http://cdn.lizi.com/images/kong.gif" /><span>在线客服</span></p></a></li><li><a href="javascript:;" class="back2top"><p><img src="http://cdn.lizi.com/images/kong.gif" /><span>返回顶部</span></p></a></li></ul></div>';F=A(HTML).appendTo("body");F.on("click","a.back2top",function(){A("body,html").animate({scrollTop:0},500);return false})},head_cart_event:function(){var B=this,D=A("#head_cart"),F=D.find(".list"),H=null;D.on("mouseenter",function(){if(H!==null){clearTimeout(H)}H=setTimeout(function(){D.addClass("hd_cart_hover");if(D.data("loaded")!=="yes"){C()}},200)}).on("mouseleave",function(){if(H!==null){clearTimeout(H)}H=setTimeout(function(){D.removeClass("hd_cart_hover")},200)});F.on("click","a.del",function(){G(this)});function C(){A.ajax({url:B.ajaxUrl.cartData,cache:false,dataType:"json",success:function(J){var I=data_class="";if(J.status==1){D.data("loaded","yes");A.each(J.data,function(K,M){var L=0;if(M.isTaoCan){L=1}I+='<dl><dt><a target="_blank" href="/product-'+M.id+'.html"><img src="'+M.pic+'"></a></dt><dd><h4><a target="_blank" href="/product-'+M.id+'.html">'+M.name+'</a></h4><p><span class="red">￥'+M.price+"</span>&nbsp;<i>X</i>&nbsp;"+M.num+'</p><a class="iconfont del" title="删除" href="javascript:;" data-lid="'+M.l_id+'" data-taocan="'+L+'">&#x164;</a></dd></dl>';if(K>5){data_class=" data_over"}});I='<div class="data'+data_class+'">'+I+'</div><div class="count">共<span class="red" id="hd_cart_count">'+J.count+'</span>件商品，满99元就包邮哦~<p>总价:<span class="red">￥<em id="hd_cart_total">'+J.total+'</em></span><a href="/cart/mycart" class="btn">去结算</a></p></div>';F.html(I);A("#hd_cartnum").html(J.count)}else{if(J.status==0){E()}else{F.html('<p class="fail"><i class="iconfont">&#371;</i><br>购物车数据加载失败<br>请稍后再试</p>')}}},error:function(I){F.html('<p class="fail"><i class="iconfont">&#371;</i><br>购物车数据加载失败<br>请稍后再试 ('+I.status+")</p>")}})}function G(I){var K=A(I),J=K.data("lid");A.ajax({url:"/cart/deleteBar",type:"post",dataType:"json",data:{idList:J},success:function(L){var M=L.totalCount;A("#hd_cartnum").html(M);if(M<1){E();return}if(K.data("taocan")==1){C()}else{K.parents("dl").remove();A("#hd_cart_count").html(L.totalCount);A("#hd_cart_total").html(L.totalPrice);if(M<7){F.find(".data").removeClass("data_over").css("zoom","1")}}},error:function(L){NALA.dialog.warn("删除失败，请稍后再试 ("+L.status+")")}})}function E(){A("#hd_cartnum").css("visibility","hidden");F.html('<p class="fail"><i class="iconfont">&#365;</i><br>购物车空啦<br>爱Ta，就带Ta来购物车吧</p>')}},mainNav_animate:function(){var E=this,H=A("#J_mainCata"),B=A("#J_subCata"),F=A("#main_nav"),G=null,D=null,L=false,K=false,J=false;if(A("#mall-slide").length>0){J=true}H.find("ul").menuAim({activate:C,exitMenu:function(){if(D!==null){clearTimeout(D)}}});F.on("mouseenter",function(){var M=A(this);if(G!==null){clearTimeout(G)}if(J){return}G=setTimeout(function(){M.addClass("main_nav_hover");H.stop().show().animate({opacity:1,height:398},300)},200)}).on("mouseleave",function(){if(G!==null){clearTimeout(G)}G=setTimeout(function(){B.css({opacity:0,left:"100px"}).find(".J_subView").hide();K=false;if(!J){H.stop().delay(200).animate({opacity:0,height:0},300,function(){F.removeClass("main_nav_hover");H.hide().find("li").removeClass("current")})}else{H.find("li").removeClass("current")}},200)});function C(N){var O=A(N),M=O.index();if(M>4){O.addClass("current").siblings("li").removeClass("current");B.find(".J_subView").hide();return false}if(M>1){B.css({top:"198px"})}else{B.css({top:"35px"})}if(K){O.addClass("current").siblings("li").removeClass("current");B.find(".J_subView").hide().eq(M).show()}else{if(D!==null){clearTimeout(D)}D=setTimeout(function(){O.addClass("current").siblings("li").removeClass("current");K=true;if(L){B.css({opacity:1,left:"213px"}).find(".J_subView").eq(M).show()}else{I(M)}},200)}}function I(N){var M=function(O){B.html(O).css({opacity:1,left:"213px"}).find(".J_subView").eq(N).show();L=true};E.cmsContentAjax("lizi_catedata",M)}},fixedObj:{},fixed:function(E){var G=this.fixedObj,B=E,C=B.attr("id")||"fixed_id",D="",F=B.height();G[C+"_top"]=B.offset().top;G[C+"_fun"]=function(){var H=$window.scrollTop();if(H>G[C+"_top"]){if(B.hasClass("fixed")){return}B.addClass("fixed");if(NALA.check.isIE6){B.css({position:"absolute"})}else{B.css({position:"fixed"})}}else{B.removeClass("fixed");B[0].style.position=""}};if(NALA.check.isIE6){D=B[0].style.cssText;B[0].style.cssText=D+";_top:expression((document).documentElement.scrollTop);"}$window.on("scroll",G[C+"_fun"])},lazyload:function(){var E=$window.height(),B=null,C=null;B=A("img").filter(function(){return A(this).attr("original")!==undefined});function D(){var F=0;if(B.length<1){return}F=$window.scrollTop();B.each(function(){var H=A(this),G=0,I=H.attr("original");if(I===""){return}G=H.offset().top;if(G>=(F-H.height())&&G<=(E+F)){H.hide().attr("src",I).fadeIn();H.attr("original","");H.error(function(){this.src="http://cdn.lizi.com/images/kong.gif";H.addClass("img_error")})}});B=B.filter(function(){return A(this).attr("original")!==""})}D();$window.on("scroll",function(){if(C!==null){clearTimeout(C)}C=setTimeout(function(){D()},50)})},cookie:function(J,D,F){if(typeof D!="undefined"){F=F||{};if(D===null){D="";F.expires=-1}var K="";if(F.expires&&(typeof F.expires=="number"||F.expires.toUTCString)){var L;if(typeof F.expires=="number"){L=new Date();L.setTime(L.getTime()+(F.expires*60*60*1000))}else{L=F.expires}K="; expires="+L.toUTCString()}var H=F.path?"; path="+F.path:"; path=/";var E=F.domain?"; domain="+F.domain:"";var I=F.secure?"; secure":"";document.cookie=[J,"=",encodeURIComponent(D),K,H,E,I].join("")}else{var B=null;if(document.cookie&&document.cookie!=""){var G=document.cookie.split(";");for(var C=0;C<G.length;C++){var M=jQuery.trim(G[C]);if(M.substring(0,J.length+1)==(J+"=")){B=decodeURIComponent(M.substring(J.length+1));break}}}return B}},timeJson:function(C){var B={};B.secs=Math.floor(C%60);B.mins=Math.floor(C/60%60);B.hours=Math.floor(C/60/60);B.days=0;if(B.hours>23){B.days=Math.floor(B.hours/24);B.hours=B.hours-B.days*24}if(B.secs<10){B.secs="0"+B.secs}if(B.mins<10){B.mins="0"+B.mins}if(B.hours<10){B.hours="0"+B.hours}if(B.days<10){B.days="0"+B.days}return B}};NALA.dialog={close:function(B){var C,D=A.dialog.list;if(B){D[B].close()}else{for(C in D){D[C].close()}}},creat:function(B){var C=null;B=A.extend({fixed:true,title:false,lock:true,padding:"20px 40px",id:"",content:""},B);C=A.dialog(B);return C},success:function(D,B){var C=null;B=B||2;this.close();D='<div class="success-tip"><i class="iconfont">&#379;</i>'+D+"</div>";C=this.creat({id:"success",content:D,lock:false});setTimeout(function(){var E=A(C.DOM.wrap);E.animate({top:"-=50px",opacity:0},300,"easeInBack",function(){C.close()})},B*1000)},warn:function(D,B){var C=null;D='<div class="warn-tip"><i class="iconfont">&#227;</i>'+D+"</div>";C=this.creat({id:"warn",content:D});C.button({name:"知道了",focus:true,callback:B})},ok:function(D,B){var C=null;D='<div class="ok-tip"><i class="iconfont">&#379;</i>'+D+"</div>";C=this.creat({id:"ok",content:D});C.button({name:"知道了",focus:true,callback:B})},confirm:function(D,B){var C=null;D='<div class="confirm-tip"><i class="iconfont">&#228;</i>'+D+"</div>";C=this.creat({id:"confirm",content:D});C.button({name:"确定",focus:true,callback:B},{name:"取消"})},showLogin:function(C){var D=null,C=C||location.href,E='<div class="dialog_login_box"><div id="login-box"><h2><div class="trig">没有帐号？<a href="/user/reg" target="_blank" class="trigger-box">点击注册</a></div>登录</h2><div class="form-bd"><div class="form_box cle" id="login-nala"><div class="login_box"><form id="login-nala-form"><ul class="form"><li class="text_input"><span class="error_icon"></span><span class="iconfont">&#338;</span><input type="text" name="j_username" class="text" placeholder="用户名/邮箱/手机号"></li><li class="text_input"><span class="error_icon"></span><span class="iconfont">&#247;</span><input type="password" name="j_password" class="text" placeholder="密码"></li><li class="error_box"><em></em></li><li class="login_param"><p><a class="forget_psd" target="_blank" href="/user/resetPwd">忘记密码?</a><label><input type="checkbox" checked="checked" name="_spring_security_remember_me" class="remember-me">下次自动登录</label></p></li><li class="last"><input type="submit" class="btn" value="登 录" /></li></ul></form></div></div></div><ul class="form other-form"><li><h5>使用第三方帐号登录</h5></li><li class="other-login"><a class="sina" target="_blank" href="https://api.weibo.com/oauth2/authorize?client_id=1062800511&response_type=code&redirect_uri=http://www.lizi.com/user/sinaLogin"></a><a class="qq" target="_blank" href="https://graph.qq.com/oauth2.0/authorize?response_type=code&amp;client_id=100224827&amp;state=1&amp;redirect_uri=www.lizi.com/user/qqLoginCallback"></a><a class="alipay" target="_blank" href="http://www.lizi.com/user/alipayLogin"></a><a class="taobao" target="_blank" id="tb-login" href="http://www.lizi.com/user/taobaoLogin"></a><a class="baidu" target="_blank" href="http://www.lizi.com/user/baiduLogin?login=baidu"></a><a class="qihoo360" target="_blank" href="https://openapi.360.cn/oauth2/authorize?client_id=6550d4a07c17ee81e0737a4203d5848c&response_type=code&redirect_uri=http://www.lizi.com/user/qihooCallBack&scope=basic&display=default"></a></li></ul></div></div>';if(NALA.isPhone){location.href="/login/auth";return}D=A.dialog({title:"您尚未登录",lock:true,fixed:true,padding:"0",id:"login",content:E,init:function(){var F=A("#login-nala-form"),K=F.find("input[name=j_username]"),J=F.find("input[name=j_password]"),G=F.find("input[type=submit]"),I=F.find("li.error_box em"),H=F.find("li.text_input");F.find("input").focus(function(){H.removeClass("params_error")});F.submit(function(){var N=A.trim(K.val()),M=A.trim(J.val()),L,O;if(G.hasClass("disabled")){return false}if(N==""||M==""){L=(N=="")?"请输入用户名":"请输入密码";I.text(L).show().delay(2000).fadeOut();return false}G.addClass("disabled").val("登录中");O={j_username:N,j_password:M,_spring_security_remember_me:"on"};A.ajax({url:"/j_spring_security_check",type:"post",data:O,dataType:"json",success:function(P){if(P.status==1){location.href=C}else{if(P.status==0){G.removeClass("disabled").val("登 录");I.text("您输入的密码和用户名不匹配").show().delay(2000).fadeOut();H.addClass("params_error")}}},error:function(P){if(P.status==200){location.reload()}else{G.removeClass("disabled").val("登 录");NALA.dialog.warn("服务器忙，请稍后再试。("+P.status+")")}}});return false});A.ajax({url:"/user/ajaxUnionLoginFilter"})}});var B='<div style="width:360px; text-indent: 2em; font-size: 14px; margin-bottom: 10px;">因淘宝联合登录故障，新用户请选择其他方式登录，老会员请联系客服取回您的淘宝联合登录账号。对您造成的不便，丽子表示抱歉。</div><p style="text-align: center;"><a href="http://wpa.b.qq.com/cgi/wpa.php?ln=1&key=XzgwMDA0MjIzN181OTY5N184MDAwNDIyMzdfMl8" class="graybtn" target="_blank"><i class="iconfont" style="color:#f70; font-size:14px;">&#54;</i> 点此咨询客服</a></p>';A("#tb-login").on("click",function(){NALA.dialog.creat({id:"tblogin-error",title:"登录故障",content:B});return false})}}})(jQuery);$(function(){var A=NALA.common;A.showLoginInfo();A.head_cart_event();A.mainNav_animate();A.searchBar();A.lazyload();A.toolBar()});